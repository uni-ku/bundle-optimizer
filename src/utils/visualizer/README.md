# visualizer

依赖关系可视化基础工具

---

## 基础概念

### 节点与链接（Node & Link）

> Node & Link 是整个体系的基础概念

1. **Node**
* 体系下的真实个体
* 有权重的（以节点之间关系的入度(in-degree)为依据，作为该节点的权重）
* 有类型的（业务中可自行对其赋予具体意义）

2. **Link**
* 个体之间的关系描述
* 有指向性的
* 有类型的（业务中可自行对其赋予具体意义）

### 受限域与锚点（Area & Anchor）

>
> “域”和“锚点”都对节点有**约束**作用，所以在这两个的概念之前加上了“**受限**” (`restrict`) 字样。
>
> Area 起到了“归集”、“管理”的作用；就像后台管理系统商品模块中的“商品管理”，节点可以类比成被管理的“商品”；
>
> 就是这个“管理”的行为，“被管理”的节点就“受限”了，变成了受限节点。
>
> 至于“锚点”的“**锚**”，其实是为了区别于普通节点，
> 因为这类受限节点是直接被“域”管理的，其他的普通节点没有这个限制；
> 在可视化时，这些普通节点其实是“游离”的（在没有受限之前，所有节点都是地位平等的、游离的），
> 而受限节点受到域的管理，集中到了一起。
>
> 在单独的某一个域的内部视角中，由于节点之间存在关系链接 (`Link`)，
> 那些游离节点就像是受到了受限节点的“牵引”，被拉进了受限域内，所以称“受限节点”为“锚点”。
>

1. **Area**
* 有等级的，起始等级为0，限制等级越高，说明深入的层次越深，具体业务含义可自行赋予
* 受限等级可以形成整个体系的组织结构或者分析的深度，可以理解成是一个多级分类的指标

>
> 受限等级业务示例场景——小程序包体系：
> * 小程序包体系中的主包可以记为等级0，各子包记为等级1；
> * 吸引：锚点指向的游离节点，这一节点之间的关系即为锚点向该游离节点的“吸引”行为；而锚点受“域”管理，所以也是域对该游离节点的吸引行为。
> * 吸引原则：受限域可以“吸引”不高于当前等级的“游离节点公共域”；如果某一个“游离节点公共域”只被一个受限域吸引（其实也能证明该公共域等级与该受限域等级一致），那么这个公共域可以并入受限域；“锚点”不能被其他域吸引，即使等级相同，他是当前受限域的组成部分，只属于当前受限域。
> * 游离节点公共域：在吸引力没有作用之前，游离节点共同组成了一个巨大的公共域，等级为0；
> * 游离节点公共域分裂原则：吸引力作用之后，“游离节点公共域”将会分裂，形成等级区分，同时不能破坏原来各“引力域”对游离节点的吸引关系结构；
>   * 一个游离节点同时被不同等级的受限域吸引，该节点进入其中最小等级的公共域（类似于公共模块的复用原则），这样就不会破坏原来的吸引关系
> * 游离节点公共域的被迫降级：如果一个公共域由于不可抗力的原因，无法在某一等级内“驻足”，或者说无法存在实体支撑，那么该公共域会被迫降1级，汇入低1级的公共域内；
>   * 这个降级行为可以连续多级，直到稳定；
>   * 这种“不可抗力”，在物理文件系统的体系下，大概是因为这个公共域没有实体支撑，于是塌陷到了低一等级的公共域内了；
>   * 有别于原生存在的公共域，被迫降级的公共域，其实是没有被降级之后等级的受限域吸引的；
>   * 但是就是这样的一个降级行为，降级之后的等级的受限域就可以吸引这个原来无法吸引的公共域了（当然，这里是存在一个因果关系的，只是理论上产生了如此的可能而已）；
>

2. **Anchor**
* 关联受限域的（areaId）

---
